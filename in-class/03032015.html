<!doctype html>
<html>
<head>
    <meta charset="utf8">

    <style>


    </style>
    <title> My first Ajax</title>
    </head>
    <body>
      AJAX!
    <div class="output"></div>
    <button class="load" data-cat="yes" >LOAD GOOD </button>
    <button class="load" data-cat="no" > LOAD BAD </button>
  <!--  <button class="load">LOAD  </button>-->

    <script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>

         <script>

    $(".load").on("click", function() {
      var $this = $(this);
      var category = $this.attr("data-cat");


       var request = $.ajax ({
         url: "http://thomaswilburn.net:8080/magic8",
        //url: "text.txt",
        cache: false,
        data :{

          category : category,
          when: Date.now(dataType)
        },
       dataType: "jsonp"
         });

           request.done(function(data) {
            console.log(data);
           var output = $(".output");
           output.html(data.answer);
      if (data.category == "yes"){
        output.css("color","green");
      }else if (data.category == "no"){
        output.css("color","red");

      }else{
        output.css("color","");
      }

    });
    request.fail(function(){
      var output = $(".output");
      output.html("Error contacting server");
    });
    request.always(function(){

      console.log("ALWAYS");

      });
    });

  console.log("this happens first blank");
       </script>
    </body>
    </html>
<!-- -->
